{% extends "pages/base.html" %}

{% block title %}Moyenne de {{ etudiant.nom }}{% endblock %}

{% block breadcrumbs %}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{% url 'home' %}"><i class="fas fa-home"></i> Accueil</a></li>
    <li class="breadcrumb-item"><a href="{% url 'etudiants_list' %}"><i class="fas fa-users"></i> Ã‰tudiants</a></li>
    <li class="breadcrumb-item active"><i class="fas fa-chart-bar"></i> Moyenne - {{ etudiant.nom }}</li>
  </ol>
</nav>
{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1>Moyenne de {{ etudiant.nom }}</h1>
  <a class="btn btn-success" href="{% url 'moyenne_pdf' etudiant.id %}">ðŸ“¥ Exporter en PDF</a>
</div>
<table class="table table-striped">
  <thead>
    <tr>
      <th>UE</th>
      <th>CC</th>
      <th>TP</th>
      <th>SN</th>
      <th>Final</th>
      <th>Ã‰tat</th>
    </tr>
  </thead>
  <tbody>
  {% for n in notes %}
    <tr>
      <td>{{ n.ue.nom }} ({{ n.ue.code }})</td>
      <td>{% if n.cc is not None %}{{ n.cc }}{% else %}<span class="text-danger">â€”</span>{% endif %}</td>
      <td>{% if n.tp is not None %}{{ n.tp }}{% else %}<span class="text-danger">â€”</span>{% endif %}</td>
      <td>{% if n.sn is not None %}{{ n.sn }}{% else %}<span class="text-danger">â€”</span>{% endif %}</td>
      <td>{% if n.final is not None %}{{ n.final|floatformat:2 }}{% else %}<span class="text-danger">â€”</span>{% endif %}</td>
      <td>{% if n.is_eliminated %}<span class="badge bg-danger">Ã‰liminÃ©</span>{% else %}<span class="badge bg-success">Valide</span>{% endif %}</td>
    </tr>
  {% empty %}
    <tr><td colspan="6">Aucune note</td></tr>
  {% endfor %}
  </tbody>
</table>
{% if moyenne is not None %}
  <div class="alert alert-info">Moyenne pondÃ©rÃ©e : {{ moyenne|floatformat:2 }}</div>
{% else %}
  <div class="alert alert-warning">Pas de notes valides pour calculer la moyenne</div>
{% endif %}
{% if return_to %}
  <a class="btn btn-secondary" href="{{ return_to }}">Retour</a>
{% else %}
  <a class="btn btn-secondary" href="{% url 'etudiants_list' %}">Retour</a>
{% endif %}
{% endblock %}
