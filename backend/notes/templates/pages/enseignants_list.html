{% extends "pages/base.html" %}

{% block title %}Enseignants{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1>Enseignants</h1>
  <a class="btn btn-primary" href="{% url 'enseignant_add' %}">Ajouter enseignant</a>
</div>
<table class="table table-striped">
  <thead><tr><th>Utilisateur</th><th>Email</th><th>Staff</th><th>Actions</th></tr></thead>
  <tbody>
  {% for u in users %}
    <tr>
      <td>{{ u.username }}</td>
      <td>{{ u.email }}</td>
      <td>{% if u.is_staff %}✅{% else %}❌{% endif %}</td>
      <td>
        {% if request.user != u %}
        <form method="post" action="{% url 'enseignant_toggle_staff' u.id %}" style="display:inline-block">
          {% csrf_token %}
          <button class="btn btn-sm btn-outline-secondary" type="submit">{% if u.is_staff %}Rétrograder{% else %}Promouvoir{% endif %}</button>
        </form>
        {% else %}
          <em>—</em>
        {% endif %}
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
